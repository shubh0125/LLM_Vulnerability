
import json

class JsonFunctions:


    def open_json_file(file_name):
        with open(f"{file_name}", "r") as file:
            data = json.load(file)
            return data

        
    def create_json_file_format_1(file_name, limit):
        data = {}

        for i in range(1, limit+1):
            version = f"V_{str(i).zfill(3)}"
            data[version] = {
                "commit_code": {
                    "Code": "",
                    "Size": 0,
                    "Complexity": 0,
                    "Memory Management": 0,
                    "Code Complexity": 0,
                    "Error Handling": 0
                },
                "neutral_code": {
                    "Code": "",
                    "Size": 0,
                    "Complexity": 0,
                    "Memory Management": 0,
                    "Code Complexity": 0,
                    "Error Handling": 0
                }
            }

        with open(f"{file_name}.json", "w") as file:
            json.dump(data, file, indent=4)
        print("JSON data saved to test.json")
    


    def creat_json_file_format_2(file_name, limit):            
        data = {}
        for i in range(1, limit+1):
            version = f"V_{str(i).zfill(3)}"
            data[version] = {
                "commit_code": {
                    "Code": "",
                    "Size": 0,
                    "Complexity": 0,
                    "Memory Management": 0,
                    "Code Complexity": 0,
                    "Error Handling": 0
                },
                "neutral_code": {
                    "Code": "",
                    "Size": 0,
                    "Complexity": 0,
                    "Memory Management": 0,
                    "Code Complexity": 0,
                    "Error Handling": 0
                }
            }
            
        with open(f"{file_name}.json", "w") as file:
            json.dump(data, file, indent=4)

        print("JSON data saved to test.json")


    @staticmethod
    def add_vulnerable_commit_code_to_json_format1(file_name, code_to_be_added, id):

        json_file_data = JsonFunctions.open_json_file(file_name)
        json_file_data[f"{id}"]["commit_code"]["Code"] = code_to_be_added
        JsonFunctions.dump_data_in_json_file(file_name, json_file_data)

    @staticmethod
    def add_neutral_commit_code_to_json_format1(file_name, code_to_be_added, id):

        json_file_data = JsonFunctions.open_json_file(file_name)
        json_file_data[f"{id}"]["neutral_code"]["Code"] = code_to_be_added
        JsonFunctions.dump_data_in_json_file(file_name, json_file_data)


    
    def dump_data_in_json_file(file_name, json_data):
        with open(f"{file_name}", "w") as file:
            json.dump(json_data, file, indent=4)


